<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0a">
    <title>DOOMED2LIVE</title>
    <link href="https://fonts.googleapis.com/css2?family=Overpass+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="glitch.css">
    <link rel="icon" type="image/png" href="doomed2livefavicon.png">

    <!-- Apple devices (iOS, macOS) -->
    <link rel="apple-touch-icon" href="doomed2livefavicon.png">

    <!-- Windows tiles -->
    <meta name="msapplication-TileImage" content="doomed2livefavicon.png">
    <meta name="msapplication-TileColor" content="#0a0a0a">

    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="logo">ROCH√à</div>

    <div class="container" id="homeView">
        <div class="doors-container">
            <button class="door-card" onclick="enterVoid(this)" data-reply="Yeah. I see it too.">The system is
                rigged</button>
            <button class="door-card" onclick="enterVoid(this)" data-reply="Then let me hold the weight for a second.">I
                feel powerless</button>
            <button class="door-card" onclick="enterVoid(this)" data-reply="Me neither. Not the clean kind.">I don't
                believe in love</button>
            <button class="door-card" onclick="enterVoid(this)" data-reply="You are not alone">All of the above</button>
            <button class="door-card" onclick="enterVoid(this)" data-reply="Then we‚Äôll settle for honest ones.">There
                are no happy endings</button>
        </div>
    </div>

    <!-- Interstitial Overlay -->
    <div id="voidOverlay" class="void-overlay" aria-hidden="true">
        <div class="void-text">You are not alone</div>
    </div>

    <div class="music-view" id="musicView">
        <div id="ep"></div> <!-- Anchor Target -->
        <audio id="audioPlayer"></audio>
        <button class="back-button" onclick="goHome()">‚Üê Back</button>

        <div class="music-content">
            <div class="content-columns">
                <div class="release-info">
                    <div class="release-header">
                        <div class="ep-artwork">
                            <img src="doomedtolivecoverart.webp" alt="Doomed to Live EP Cover">
                        </div>
                    </div>
                </div>

                <div class="tracks-area">
                    <div class="track-list" id="trackList"></div>
                    <!-- Hidden Player Template that will be moved around -->
                    <div id="playerTemplate" style="display: none;">
                        <div class="player" id="player">
                            <div class="player-title">Now Playing</div>
                            <div class="player-track" id="playerTrack">‚Äî</div>
                            <!-- Audio element moved to root -->
                            <div class="player-controls">
                                <button id="playBtn" onclick="togglePlay(event)">‚ñ∂ Play</button>
                                <button class="download-btn" onclick="downloadTrack(event)">‚òï Support &
                                    Download</button>
                            </div>
                            <div class="player-progress" onclick="seek(event)">
                                <div class="player-progress-fill" id="progressFill"></div>
                            </div>
                            <div class="player-time">
                                <span id="currentTime">0:00</span>
                                <span id="duration">3:00</span>
                            </div>
                        </div>
                    </div>
                    <!-- Download Full EP Button Moved Here -->
                    <div
                        style="width: 100%; display: flex; justify-content: center; margin-top: 24px; padding-left: 0;">
                        <button class="download-full-ep-btn" onclick="downloadFullEP()">Download Full EP</button>
                    </div>
                </div>
            </div>

            <!-- Lyrics Container Inside music-content -->
            <div id="lyricsContainer" class="lyrics-container">
                <div id="currentLyricLine" class="lyrics-line"></div>
            </div>
        </div>
    </div>

    <!-- Older Music Section (Outside the 2-column layout) -->
    <!-- Temporarily Deactivated
        <div class="older-music-section">
            <button class="older-music-btn" onclick="goToArchive()">PAST MOODS</button>
        </div>
        -->
    </div>

    <!-- Archive View (Reusing layout structure) -->
    <!-- Temporarily Deactivated
    <div class="music-view" id="archiveView">
        <button class="back-button" onclick="returnToLatest()">‚Üê Latest</button>

        <div class="music-content">
            <div class="tracks-area">
                <div class="track-list" id="archiveList">
                    Populated by JS
                </div>
            </div>
        </div>
    </div>
    -->

    <!-- Mini Player (appears above footer when playing) -->
    <!-- Mini Player (appears above footer when playing) -->
    <!-- Discreet Player Info (Bottom Right) -->
    <div class="discreet-player-info" id="discreetPlayer">
        <div class="discreet-status"></div>
        <div class="discreet-text">
            <span id="discreetTrackName" style="margin-right: 8px;">Doomed to Live</span>
            <span id="discreetTime" style="color: var(--color-text-secondary); font-size: 9px;">0:00 / 0:00</span>
        </div>
        <div class="discreet-controls">
            <input type="range" id="volumeSlider" class="volume-slider" min="0" max="1" step="0.05" value="1"
                oninput="setVolume(this.value)">
            <button class="discreet-btn" id="discreetPlayBtn" onclick="togglePlay()">‚ñ∂</button>
        </div>
    </div>

    <footer>
        <!-- Progress Bar Integrated into Footer Top Border -->
        <div class="footer-progress-container" id="footerProgressContainer" onclick="seekFooter(event)">
            <div class="footer-progress-bar" id="footerProgressBar"></div>
        </div>
        <div class="poem">
            <span>
                <a href="https://www.samaritans.org/" target="_blank" rel="noopener noreferrer">SAMARITANS</a> <span
                    style="color: var(--color-accent)">116 123</span> ‚Ä¢
                <a href="https://www.thecalmzone.net/" target="_blank" rel="noopener noreferrer">CALM</a> <span
                    style="color: var(--color-accent)">0800 58 58 58</span> ‚Ä¢
                <a href="https://www.papyrus-uk.org/" target="_blank" rel="noopener noreferrer">PAPYRUS</a> <span
                    style="color: var(--color-accent)">0800 068 4141</span> ‚Ä¢
                <a href="https://www.crisis.org.uk/get-help/" target="_blank" rel="noopener noreferrer">CRISIS</a> <span
                    style="color: var(--color-accent)">85258</span> ‚Ä¢
                <a href="https://www.helpmusicians.org.uk/" target="_blank" rel="noopener noreferrer">HELP MUSICIANS
                    UK</a> <span style="color: var(--color-accent)">0808 802 8008</span>
            </span>
        </div>
        <div class="socials">
            <a href="https://tiktok.com/@rocheofficiel" class="social-link">TikTok</a>
            <a href="https://instagram.com/@rocheofficiel" class="social-link">Instagram</a>
            <a href="https://youtube.com/@rocheofficiel" class="social-link">YouTube</a>
            <a href="https://open.spotify.com/artist/2EJmFMBLaeIYrmKK15iQ3M" class="social-link">Spotify</a>
        </div>
    </footer>

    <!-- Sympathy Modal (First Interaction) -->
    <div class="modal" id="sympathyModal">
        <div class="modal-content" style="text-align: center;">
            <button class="modal-close" onclick="closeModal('sympathyModal')">√ó</button>
            <h3 style="margin-bottom: 32px; font-size: 20px;">ONE SECOND MATE</h3>
            <p style="font-size: 14px; line-height: 1.6; margin-bottom: 24px;">
                Toss a penny in the hat for the poor noisemaker. A warm meal buys a
                sweeter beat, it does.
            </p>
            <p style="font-size: 14px; line-height: 1.6; margin-bottom: 32px; color: var(--color-icon);">
                Or take the tune for free, if fortune hasn't favored ye this week.
            </p>
            <div style="display: flex; flex-direction: column; gap: 16px;">
                <button class="submit-btn" onclick="openPaymentModal()">üí∞ Toss a Penny</button>
                <button class="submit-btn"
                    style="background: transparent; border: 1px solid var(--color-text-secondary); color: var(--color-text-secondary);"
                    onclick="openContactModal()">‚¨áÔ∏è JUST FUCKING DOWNLOAD!</button>
            </div>
        </div>
    </div>

    <!-- Payment Input Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('paymentModal')">√ó</button>
            <button class="back-link" onclick="backToSympathy()"
                style="border: none; background: none; color: var(--color-text-secondary); cursor: pointer; margin-bottom: 16px; padding: 0;">‚Üê
                Back</button>
            <h3>Toss a Penny</h3>
            <p id="paymentDescription">Select your contribution amount.</p>

            <div class="form-group">
                <label>Amount (¬£)</label>
                <div style="display: flex; gap: 16px; margin-bottom: 16px;">
                    <button class="amount-option-btn active" onclick="setPaymentAmount('min')">Minimum</button>
                    <button class="amount-option-btn" onclick="setPaymentAmount('custom')">Custom</button>
                </div>
                <input type="number" id="paymentAmountInput" placeholder="Enter amount" step="0.01">
                <p id="minAmountMsg" style="font-size: 10px; color: var(--color-accent); margin-top: 4px;">Minimum:
                    ¬£1.00
                </p>
            </div>

            <button class="submit-btn" onclick="initiateStripeCheckout()">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Contact Form Modal (Free MP3) -->
    <div class="modal" id="contactModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('contactModal')">√ó</button>
            <button class="back-link" onclick="backToSympathy()"
                style="border: none; background: none; color: var(--color-text-secondary); cursor: pointer; margin-bottom: 16px; padding: 0;">‚Üê
                Back</button>
            <h3>Fortune Hasn't Favored?</h3>
            <p>No worries. Just let me know who's listening.</p>

            <form id="freeDownloadForm" onsubmit="submitFreeForm(event)">
                <div class="form-group">
                    <label>Name *</label>
                    <input type="text" id="freeName" required>
                </div>
                <div class="form-group">
                    <label>Email *</label>
                    <input type="email" id="freeEmail" required>
                </div>
                <div class="form-group">
                    <label>Phone (Optional)</label>
                    <input type="tel" id="freePhone">
                </div>
                <button type="submit" class="submit-btn" style="background: var(--color-text-secondary);">Get
                    MP3s</button>
            </form>
        </div>
    </div>

    <!-- Stripe Checkout Modal -->
    <div class="modal" id="checkoutModal">
        <div class="modal-content" style="max-width: 800px; width: 95%;">
            <button class="modal-close" onclick="closeModal('checkoutModal')">√ó</button>
            <div id="stripe-checkout-container"></div>
        </div>
    </div>

    <script src="https://js.stripe.com/v3/"></script>
    <div id="toast-container"
        style="position: fixed; bottom: 20px; right: 20px; z-index: 10000; display: flex; flex-direction: column; gap: 10px; pointer-events: none;">
    </div>

    <script src="script.js" defer></script>
</body>

</html>